// CODE GENERATED BY github.com/volvo-cars/lingon. DO NOT EDIT.

package google

import (
	"encoding/json"
	"fmt"
	bigqueryroutine "github.com/golingon/terraproviders/google/4.59.0/bigqueryroutine"
	"github.com/volvo-cars/lingon/pkg/terra"
	"io"
)

func NewBigqueryRoutine(name string, args BigqueryRoutineArgs) *BigqueryRoutine {
	return &BigqueryRoutine{
		Args: args,
		Name: name,
	}
}

var _ terra.Resource = (*BigqueryRoutine)(nil)

type BigqueryRoutine struct {
	Name  string
	Args  BigqueryRoutineArgs
	state *bigqueryRoutineState
}

func (br *BigqueryRoutine) Type() string {
	return "google_bigquery_routine"
}

func (br *BigqueryRoutine) LocalName() string {
	return br.Name
}

func (br *BigqueryRoutine) Configuration() interface{} {
	return br.Args
}

func (br *BigqueryRoutine) Attributes() bigqueryRoutineAttributes {
	return bigqueryRoutineAttributes{ref: terra.ReferenceResource(br)}
}

func (br *BigqueryRoutine) ImportState(av io.Reader) error {
	br.state = &bigqueryRoutineState{}
	if err := json.NewDecoder(av).Decode(br.state); err != nil {
		return fmt.Errorf("decoding state into resource %s.%s: %w", br.Type(), br.LocalName(), err)
	}
	return nil
}

func (br *BigqueryRoutine) State() (*bigqueryRoutineState, bool) {
	return br.state, br.state != nil
}

func (br *BigqueryRoutine) StateMust() *bigqueryRoutineState {
	if br.state == nil {
		panic(fmt.Sprintf("state is nil for resource %s.%s", br.Type(), br.LocalName()))
	}
	return br.state
}

func (br *BigqueryRoutine) DependOn() terra.Reference {
	return terra.ReferenceResource(br)
}

type BigqueryRoutineArgs struct {
	// DatasetId: string, required
	DatasetId terra.StringValue `hcl:"dataset_id,attr" validate:"required"`
	// DefinitionBody: string, required
	DefinitionBody terra.StringValue `hcl:"definition_body,attr" validate:"required"`
	// Description: string, optional
	Description terra.StringValue `hcl:"description,attr"`
	// DeterminismLevel: string, optional
	DeterminismLevel terra.StringValue `hcl:"determinism_level,attr"`
	// Id: string, optional
	Id terra.StringValue `hcl:"id,attr"`
	// ImportedLibraries: list of string, optional
	ImportedLibraries terra.ListValue[terra.StringValue] `hcl:"imported_libraries,attr"`
	// Language: string, optional
	Language terra.StringValue `hcl:"language,attr"`
	// Project: string, optional
	Project terra.StringValue `hcl:"project,attr"`
	// ReturnTableType: string, optional
	ReturnTableType terra.StringValue `hcl:"return_table_type,attr"`
	// ReturnType: string, optional
	ReturnType terra.StringValue `hcl:"return_type,attr"`
	// RoutineId: string, required
	RoutineId terra.StringValue `hcl:"routine_id,attr" validate:"required"`
	// RoutineType: string, optional
	RoutineType terra.StringValue `hcl:"routine_type,attr"`
	// Arguments: min=0
	Arguments []bigqueryroutine.Arguments `hcl:"arguments,block" validate:"min=0"`
	// Timeouts: optional
	Timeouts *bigqueryroutine.Timeouts `hcl:"timeouts,block"`
	// DependsOn contains resources that BigqueryRoutine depends on
	DependsOn terra.Dependencies `hcl:"depends_on,attr"`
}
type bigqueryRoutineAttributes struct {
	ref terra.Reference
}

func (br bigqueryRoutineAttributes) CreationTime() terra.NumberValue {
	return terra.ReferenceNumber(br.ref.Append("creation_time"))
}

func (br bigqueryRoutineAttributes) DatasetId() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("dataset_id"))
}

func (br bigqueryRoutineAttributes) DefinitionBody() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("definition_body"))
}

func (br bigqueryRoutineAttributes) Description() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("description"))
}

func (br bigqueryRoutineAttributes) DeterminismLevel() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("determinism_level"))
}

func (br bigqueryRoutineAttributes) Id() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("id"))
}

func (br bigqueryRoutineAttributes) ImportedLibraries() terra.ListValue[terra.StringValue] {
	return terra.ReferenceList[terra.StringValue](br.ref.Append("imported_libraries"))
}

func (br bigqueryRoutineAttributes) Language() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("language"))
}

func (br bigqueryRoutineAttributes) LastModifiedTime() terra.NumberValue {
	return terra.ReferenceNumber(br.ref.Append("last_modified_time"))
}

func (br bigqueryRoutineAttributes) Project() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("project"))
}

func (br bigqueryRoutineAttributes) ReturnTableType() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("return_table_type"))
}

func (br bigqueryRoutineAttributes) ReturnType() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("return_type"))
}

func (br bigqueryRoutineAttributes) RoutineId() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("routine_id"))
}

func (br bigqueryRoutineAttributes) RoutineType() terra.StringValue {
	return terra.ReferenceString(br.ref.Append("routine_type"))
}

func (br bigqueryRoutineAttributes) Arguments() terra.ListValue[bigqueryroutine.ArgumentsAttributes] {
	return terra.ReferenceList[bigqueryroutine.ArgumentsAttributes](br.ref.Append("arguments"))
}

func (br bigqueryRoutineAttributes) Timeouts() bigqueryroutine.TimeoutsAttributes {
	return terra.ReferenceSingle[bigqueryroutine.TimeoutsAttributes](br.ref.Append("timeouts"))
}

type bigqueryRoutineState struct {
	CreationTime      float64                          `json:"creation_time"`
	DatasetId         string                           `json:"dataset_id"`
	DefinitionBody    string                           `json:"definition_body"`
	Description       string                           `json:"description"`
	DeterminismLevel  string                           `json:"determinism_level"`
	Id                string                           `json:"id"`
	ImportedLibraries []string                         `json:"imported_libraries"`
	Language          string                           `json:"language"`
	LastModifiedTime  float64                          `json:"last_modified_time"`
	Project           string                           `json:"project"`
	ReturnTableType   string                           `json:"return_table_type"`
	ReturnType        string                           `json:"return_type"`
	RoutineId         string                           `json:"routine_id"`
	RoutineType       string                           `json:"routine_type"`
	Arguments         []bigqueryroutine.ArgumentsState `json:"arguments"`
	Timeouts          *bigqueryroutine.TimeoutsState   `json:"timeouts"`
}
