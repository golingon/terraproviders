// CODE GENERATED BY github.com/volvo-cars/lingon. DO NOT EDIT.

package aws

import (
	"encoding/json"
	"fmt"
	backupselection "github.com/golingon/terraproviders/aws/4.60.0/backupselection"
	"github.com/volvo-cars/lingon/pkg/terra"
	"io"
)

func NewBackupSelection(name string, args BackupSelectionArgs) *BackupSelection {
	return &BackupSelection{
		Args: args,
		Name: name,
	}
}

var _ terra.Resource = (*BackupSelection)(nil)

type BackupSelection struct {
	Name  string
	Args  BackupSelectionArgs
	state *backupSelectionState
}

func (bs *BackupSelection) Type() string {
	return "aws_backup_selection"
}

func (bs *BackupSelection) LocalName() string {
	return bs.Name
}

func (bs *BackupSelection) Configuration() interface{} {
	return bs.Args
}

func (bs *BackupSelection) Attributes() backupSelectionAttributes {
	return backupSelectionAttributes{ref: terra.ReferenceResource(bs)}
}

func (bs *BackupSelection) ImportState(av io.Reader) error {
	bs.state = &backupSelectionState{}
	if err := json.NewDecoder(av).Decode(bs.state); err != nil {
		return fmt.Errorf("decoding state into resource %s.%s: %w", bs.Type(), bs.LocalName(), err)
	}
	return nil
}

func (bs *BackupSelection) State() (*backupSelectionState, bool) {
	return bs.state, bs.state != nil
}

func (bs *BackupSelection) StateMust() *backupSelectionState {
	if bs.state == nil {
		panic(fmt.Sprintf("state is nil for resource %s.%s", bs.Type(), bs.LocalName()))
	}
	return bs.state
}

func (bs *BackupSelection) DependOn() terra.Reference {
	return terra.ReferenceResource(bs)
}

type BackupSelectionArgs struct {
	// IamRoleArn: string, required
	IamRoleArn terra.StringValue `hcl:"iam_role_arn,attr" validate:"required"`
	// Id: string, optional
	Id terra.StringValue `hcl:"id,attr"`
	// Name: string, required
	Name terra.StringValue `hcl:"name,attr" validate:"required"`
	// NotResources: set of string, optional
	NotResources terra.SetValue[terra.StringValue] `hcl:"not_resources,attr"`
	// PlanId: string, required
	PlanId terra.StringValue `hcl:"plan_id,attr" validate:"required"`
	// Resources: set of string, optional
	Resources terra.SetValue[terra.StringValue] `hcl:"resources,attr"`
	// Condition: min=0
	Condition []backupselection.Condition `hcl:"condition,block" validate:"min=0"`
	// SelectionTag: min=0
	SelectionTag []backupselection.SelectionTag `hcl:"selection_tag,block" validate:"min=0"`
	// DependsOn contains resources that BackupSelection depends on
	DependsOn terra.Dependencies `hcl:"depends_on,attr"`
}
type backupSelectionAttributes struct {
	ref terra.Reference
}

func (bs backupSelectionAttributes) IamRoleArn() terra.StringValue {
	return terra.ReferenceString(bs.ref.Append("iam_role_arn"))
}

func (bs backupSelectionAttributes) Id() terra.StringValue {
	return terra.ReferenceString(bs.ref.Append("id"))
}

func (bs backupSelectionAttributes) Name() terra.StringValue {
	return terra.ReferenceString(bs.ref.Append("name"))
}

func (bs backupSelectionAttributes) NotResources() terra.SetValue[terra.StringValue] {
	return terra.ReferenceSet[terra.StringValue](bs.ref.Append("not_resources"))
}

func (bs backupSelectionAttributes) PlanId() terra.StringValue {
	return terra.ReferenceString(bs.ref.Append("plan_id"))
}

func (bs backupSelectionAttributes) Resources() terra.SetValue[terra.StringValue] {
	return terra.ReferenceSet[terra.StringValue](bs.ref.Append("resources"))
}

func (bs backupSelectionAttributes) Condition() terra.SetValue[backupselection.ConditionAttributes] {
	return terra.ReferenceSet[backupselection.ConditionAttributes](bs.ref.Append("condition"))
}

func (bs backupSelectionAttributes) SelectionTag() terra.SetValue[backupselection.SelectionTagAttributes] {
	return terra.ReferenceSet[backupselection.SelectionTagAttributes](bs.ref.Append("selection_tag"))
}

type backupSelectionState struct {
	IamRoleArn   string                              `json:"iam_role_arn"`
	Id           string                              `json:"id"`
	Name         string                              `json:"name"`
	NotResources []string                            `json:"not_resources"`
	PlanId       string                              `json:"plan_id"`
	Resources    []string                            `json:"resources"`
	Condition    []backupselection.ConditionState    `json:"condition"`
	SelectionTag []backupselection.SelectionTagState `json:"selection_tag"`
}
