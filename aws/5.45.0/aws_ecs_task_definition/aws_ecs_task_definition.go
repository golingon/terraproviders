// CODE GENERATED BY github.com/golingon/lingon. DO NOT EDIT.

package aws_ecs_task_definition

import (
	"encoding/json"
	"fmt"
	"github.com/golingon/lingon/pkg/terra"
	"io"
)

// New creates a new instance of [Resource].
func New(name string, args Args) *Resource {
	return &Resource{
		Args: args,
		Name: name,
	}
}

var _ terra.Resource = (*Resource)(nil)

// Resource represents the Terraform resource aws_ecs_task_definition.
type Resource struct {
	Name      string
	Args      Args
	state     *awsEcsTaskDefinitionState
	DependsOn terra.Dependencies
	Lifecycle *terra.Lifecycle
}

// Type returns the Terraform object type for [Resource].
func (aetd *Resource) Type() string {
	return "aws_ecs_task_definition"
}

// LocalName returns the local name for [Resource].
func (aetd *Resource) LocalName() string {
	return aetd.Name
}

// Configuration returns the configuration (args) for [Resource].
func (aetd *Resource) Configuration() interface{} {
	return aetd.Args
}

// DependOn is used for other resources to depend on [Resource].
func (aetd *Resource) DependOn() terra.Reference {
	return terra.ReferenceResource(aetd)
}

// Dependencies returns the list of resources [Resource] depends_on.
func (aetd *Resource) Dependencies() terra.Dependencies {
	return aetd.DependsOn
}

// LifecycleManagement returns the lifecycle block for [Resource].
func (aetd *Resource) LifecycleManagement() *terra.Lifecycle {
	return aetd.Lifecycle
}

// Attributes returns the attributes for [Resource].
func (aetd *Resource) Attributes() awsEcsTaskDefinitionAttributes {
	return awsEcsTaskDefinitionAttributes{ref: terra.ReferenceResource(aetd)}
}

// ImportState imports the given attribute values into [Resource]'s state.
func (aetd *Resource) ImportState(state io.Reader) error {
	aetd.state = &awsEcsTaskDefinitionState{}
	if err := json.NewDecoder(state).Decode(aetd.state); err != nil {
		return fmt.Errorf("decoding state into resource %s.%s: %w", aetd.Type(), aetd.LocalName(), err)
	}
	return nil
}

// State returns the state and a bool indicating if [Resource] has state.
func (aetd *Resource) State() (*awsEcsTaskDefinitionState, bool) {
	return aetd.state, aetd.state != nil
}

// StateMust returns the state for [Resource]. Panics if the state is nil.
func (aetd *Resource) StateMust() *awsEcsTaskDefinitionState {
	if aetd.state == nil {
		panic(fmt.Sprintf("state is nil for resource %s.%s", aetd.Type(), aetd.LocalName()))
	}
	return aetd.state
}

// Args contains the configurations for aws_ecs_task_definition.
type Args struct {
	// ContainerDefinitions: string, required
	ContainerDefinitions terra.StringValue `hcl:"container_definitions,attr" validate:"required"`
	// Cpu: string, optional
	Cpu terra.StringValue `hcl:"cpu,attr"`
	// ExecutionRoleArn: string, optional
	ExecutionRoleArn terra.StringValue `hcl:"execution_role_arn,attr"`
	// Family: string, required
	Family terra.StringValue `hcl:"family,attr" validate:"required"`
	// Id: string, optional
	Id terra.StringValue `hcl:"id,attr"`
	// IpcMode: string, optional
	IpcMode terra.StringValue `hcl:"ipc_mode,attr"`
	// Memory: string, optional
	Memory terra.StringValue `hcl:"memory,attr"`
	// NetworkMode: string, optional
	NetworkMode terra.StringValue `hcl:"network_mode,attr"`
	// PidMode: string, optional
	PidMode terra.StringValue `hcl:"pid_mode,attr"`
	// RequiresCompatibilities: set of string, optional
	RequiresCompatibilities terra.SetValue[terra.StringValue] `hcl:"requires_compatibilities,attr"`
	// SkipDestroy: bool, optional
	SkipDestroy terra.BoolValue `hcl:"skip_destroy,attr"`
	// Tags: map of string, optional
	Tags terra.MapValue[terra.StringValue] `hcl:"tags,attr"`
	// TagsAll: map of string, optional
	TagsAll terra.MapValue[terra.StringValue] `hcl:"tags_all,attr"`
	// TaskRoleArn: string, optional
	TaskRoleArn terra.StringValue `hcl:"task_role_arn,attr"`
	// TrackLatest: bool, optional
	TrackLatest terra.BoolValue `hcl:"track_latest,attr"`
	// EphemeralStorage: optional
	EphemeralStorage *EphemeralStorage `hcl:"ephemeral_storage,block"`
	// InferenceAccelerator: min=0
	InferenceAccelerator []InferenceAccelerator `hcl:"inference_accelerator,block" validate:"min=0"`
	// PlacementConstraints: min=0,max=10
	PlacementConstraints []PlacementConstraints `hcl:"placement_constraints,block" validate:"min=0,max=10"`
	// ProxyConfiguration: optional
	ProxyConfiguration *ProxyConfiguration `hcl:"proxy_configuration,block"`
	// RuntimePlatform: optional
	RuntimePlatform *RuntimePlatform `hcl:"runtime_platform,block"`
	// Volume: min=0
	Volume []Volume `hcl:"volume,block" validate:"min=0"`
}

type awsEcsTaskDefinitionAttributes struct {
	ref terra.Reference
}

// Arn returns a reference to field arn of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) Arn() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("arn"))
}

// ArnWithoutRevision returns a reference to field arn_without_revision of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) ArnWithoutRevision() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("arn_without_revision"))
}

// ContainerDefinitions returns a reference to field container_definitions of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) ContainerDefinitions() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("container_definitions"))
}

// Cpu returns a reference to field cpu of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) Cpu() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("cpu"))
}

// ExecutionRoleArn returns a reference to field execution_role_arn of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) ExecutionRoleArn() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("execution_role_arn"))
}

// Family returns a reference to field family of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) Family() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("family"))
}

// Id returns a reference to field id of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) Id() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("id"))
}

// IpcMode returns a reference to field ipc_mode of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) IpcMode() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("ipc_mode"))
}

// Memory returns a reference to field memory of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) Memory() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("memory"))
}

// NetworkMode returns a reference to field network_mode of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) NetworkMode() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("network_mode"))
}

// PidMode returns a reference to field pid_mode of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) PidMode() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("pid_mode"))
}

// RequiresCompatibilities returns a reference to field requires_compatibilities of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) RequiresCompatibilities() terra.SetValue[terra.StringValue] {
	return terra.ReferenceAsSet[terra.StringValue](aetd.ref.Append("requires_compatibilities"))
}

// Revision returns a reference to field revision of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) Revision() terra.NumberValue {
	return terra.ReferenceAsNumber(aetd.ref.Append("revision"))
}

// SkipDestroy returns a reference to field skip_destroy of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) SkipDestroy() terra.BoolValue {
	return terra.ReferenceAsBool(aetd.ref.Append("skip_destroy"))
}

// Tags returns a reference to field tags of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) Tags() terra.MapValue[terra.StringValue] {
	return terra.ReferenceAsMap[terra.StringValue](aetd.ref.Append("tags"))
}

// TagsAll returns a reference to field tags_all of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) TagsAll() terra.MapValue[terra.StringValue] {
	return terra.ReferenceAsMap[terra.StringValue](aetd.ref.Append("tags_all"))
}

// TaskRoleArn returns a reference to field task_role_arn of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) TaskRoleArn() terra.StringValue {
	return terra.ReferenceAsString(aetd.ref.Append("task_role_arn"))
}

// TrackLatest returns a reference to field track_latest of aws_ecs_task_definition.
func (aetd awsEcsTaskDefinitionAttributes) TrackLatest() terra.BoolValue {
	return terra.ReferenceAsBool(aetd.ref.Append("track_latest"))
}

func (aetd awsEcsTaskDefinitionAttributes) EphemeralStorage() terra.ListValue[EphemeralStorageAttributes] {
	return terra.ReferenceAsList[EphemeralStorageAttributes](aetd.ref.Append("ephemeral_storage"))
}

func (aetd awsEcsTaskDefinitionAttributes) InferenceAccelerator() terra.SetValue[InferenceAcceleratorAttributes] {
	return terra.ReferenceAsSet[InferenceAcceleratorAttributes](aetd.ref.Append("inference_accelerator"))
}

func (aetd awsEcsTaskDefinitionAttributes) PlacementConstraints() terra.SetValue[PlacementConstraintsAttributes] {
	return terra.ReferenceAsSet[PlacementConstraintsAttributes](aetd.ref.Append("placement_constraints"))
}

func (aetd awsEcsTaskDefinitionAttributes) ProxyConfiguration() terra.ListValue[ProxyConfigurationAttributes] {
	return terra.ReferenceAsList[ProxyConfigurationAttributes](aetd.ref.Append("proxy_configuration"))
}

func (aetd awsEcsTaskDefinitionAttributes) RuntimePlatform() terra.ListValue[RuntimePlatformAttributes] {
	return terra.ReferenceAsList[RuntimePlatformAttributes](aetd.ref.Append("runtime_platform"))
}

func (aetd awsEcsTaskDefinitionAttributes) Volume() terra.SetValue[VolumeAttributes] {
	return terra.ReferenceAsSet[VolumeAttributes](aetd.ref.Append("volume"))
}

type awsEcsTaskDefinitionState struct {
	Arn                     string                      `json:"arn"`
	ArnWithoutRevision      string                      `json:"arn_without_revision"`
	ContainerDefinitions    string                      `json:"container_definitions"`
	Cpu                     string                      `json:"cpu"`
	ExecutionRoleArn        string                      `json:"execution_role_arn"`
	Family                  string                      `json:"family"`
	Id                      string                      `json:"id"`
	IpcMode                 string                      `json:"ipc_mode"`
	Memory                  string                      `json:"memory"`
	NetworkMode             string                      `json:"network_mode"`
	PidMode                 string                      `json:"pid_mode"`
	RequiresCompatibilities []string                    `json:"requires_compatibilities"`
	Revision                float64                     `json:"revision"`
	SkipDestroy             bool                        `json:"skip_destroy"`
	Tags                    map[string]string           `json:"tags"`
	TagsAll                 map[string]string           `json:"tags_all"`
	TaskRoleArn             string                      `json:"task_role_arn"`
	TrackLatest             bool                        `json:"track_latest"`
	EphemeralStorage        []EphemeralStorageState     `json:"ephemeral_storage"`
	InferenceAccelerator    []InferenceAcceleratorState `json:"inference_accelerator"`
	PlacementConstraints    []PlacementConstraintsState `json:"placement_constraints"`
	ProxyConfiguration      []ProxyConfigurationState   `json:"proxy_configuration"`
	RuntimePlatform         []RuntimePlatformState      `json:"runtime_platform"`
	Volume                  []VolumeState               `json:"volume"`
}
